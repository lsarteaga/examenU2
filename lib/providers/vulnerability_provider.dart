import 'package:flutter/material.dart';
import 'package:examenu2/models/person_model.dart';
import 'package:examenu2/providers/db_provider.dart';

class VulnerabilityProvider extends ChangeNotifier {
  List<PersonModel> persons = [];

  Future<PersonModel> addPerson(String cardId, String name, String surname,
      String birthDate, String discapacity) async {
    PersonModel person = PersonModel(
        cardId: cardId,
        name: name,
        surname: surname,
        birthDate: birthDate,
        discapacity: discapacity);
    person.time = DateTime.now().toIso8601String();
    final id = await DBProvider.db.create(person);
    person.id = id;
    persons.add(person);
    notifyListeners();
    return person;
  }

  loadPersons() async {
    final personsQuery = await DBProvider.db.list();
    this.persons = [...personsQuery];
    notifyListeners();
  }
}
